<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Utils - Inno Alumni Portal</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../front/Front-end.html"><strong aria-hidden="true">1.</strong> Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../front/API.html"><strong aria-hidden="true">1.1.</strong> API</a></li><li class="chapter-item expanded "><a href="../front/Components.html"><strong aria-hidden="true">1.2.</strong> Components</a></li><li class="chapter-item expanded "><a href="../front/Contexts.html"><strong aria-hidden="true">1.3.</strong> Contexts</a></li><li class="chapter-item expanded "><a href="../front/Guards.html"><strong aria-hidden="true">1.4.</strong> Guards</a></li><li class="chapter-item expanded "><a href="../front/Hocs.html"><strong aria-hidden="true">1.5.</strong> Hocs</a></li><li class="chapter-item expanded "><a href="../front/Hooks.html"><strong aria-hidden="true">1.6.</strong> Hooks</a></li><li class="chapter-item expanded "><a href="../front/Theme.html"><strong aria-hidden="true">1.7.</strong> Theme</a></li><li class="chapter-item expanded "><a href="../front/Utils.html"><strong aria-hidden="true">1.8.</strong> Utils</a></li></ol></li><li class="chapter-item expanded "><a href="../server/Back-end.html"><strong aria-hidden="true">2.</strong> Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../server/API.html"><strong aria-hidden="true">2.1.</strong> API</a></li><li class="chapter-item expanded "><a href="../server/Schema.html"><strong aria-hidden="true">2.2.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../server/Telegram.html"><strong aria-hidden="true">2.3.</strong> Telegram</a></li><li class="chapter-item expanded "><a href="../server/Utils.html" class="active"><strong aria-hidden="true">2.4.</strong> Utils</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Inno Alumni Portal</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="utils"><a class="header" href="#utils">Utils</a></h1>
<h2 id="send_email"><a class="header" href="#send_email">send_email</a></h2>
<p>It is used to send an email. It takes the following parameters:</p>
<ul>
<li>background_tasks: A BackgroundTasks object used to run tasks in the background</li>
<li>subject: The subject of the email</li>
<li>email_to: The recipient's email address</li>
<li>body: A dictionary containing the email body data</li>
<li>template_name: The name of the email template to use</li>
</ul>
<p>Inside the function, a MessageSchema object named message is created with the following attributes:</p>
<ul>
<li>subject: The subject of the email</li>
<li>recipients: A list of recipient email addresses</li>
<li>template_body: The body of the email (HTML content)</li>
<li>subtype: The subtype of the email (set to 'html')</li>
</ul>
<p>The config object is printed, and a FastMail object named fm is created using the config object.</p>
<p>Finally, a task is added to the background_tasks object to send the email using the send_message method of the fm object and the specified template name.</p>
<h2 id="hash_password"><a class="header" href="#hash_password">hash_password</a></h2>
<p>Input: password (string)</p>
<p>Output: hashed password (string)</p>
<p>Description: This function takes a plain text password as input and returns the hashed version of the password using the pwd_ctx.hash method.</p>
<h2 id="verify_password"><a class="header" href="#verify_password">verify_password</a></h2>
<p>Input: plain_password (string), hashed_password (string)</p>
<p>Output: boolean</p>
<p>Description: This function takes a plain text password and a hashed password as input and verifies if the plain text password matches the hashed password using the pwd_ctx.verify method. It returns a boolean value indicating whether the passwords match or not.</p>
<h2 id="get_current_user"><a class="header" href="#get_current_user">get_current_user</a></h2>
<p>Input: token (string)</p>
<p>Output: user (object)</p>
<p>Description: This function retrieves the current user based on the provided token. It first verifies the access token using the verify_access_token function and throws an HTTPException with a status code of 401 if the credentials are not valid. If the credentials are valid, it queries the database to find the user with the matching email and returns the user object.</p>
<h2 id="rolechecker"><a class="header" href="#rolechecker">RoleChecker</a></h2>
<p>Input: allowed_roles (List of strings)</p>
<p>Output: None</p>
<p>Description: This class is used for checking if a user has the required role to perform a certain operation. It has an init method that initializes the allowed_roles attribute with the provided list of roles. It also has a call method that takes a user object as an argument, which is obtained from the get_current_user function. If the user's role is not in the allowed_roles list, it raises an HTTPException with a status code of 403 and a detail message of "Unauthorized [Role] - Operation not permitted".</p>
<h2 id="create_access_token"><a class="header" href="#create_access_token">create_access_token</a></h2>
<p>Input: data (dict), expires_delta (Optional[timedelta])</p>
<p>Output: encoded_jwt (str)</p>
<p>Description: This function is used to create an access token. It takes in a dictionary of data and an optional timedelta object representing the expiration time for the token. If expires_delta is provided, the token will expire after the specified time. Otherwise, it will expire after a default time of ACCESS_TOKEN_EXPIRE_MINUTES minutes. The function copies the data dictionary, adds the expiration time to it, encodes the dictionary into a JWT using the SECRET_KEY and ALGORITHM, and returns the encoded JWT.</p>
<h2 id="verify_access_token"><a class="header" href="#verify_access_token">verify_access_token</a></h2>
<p>Input: token (str), credentials_exception</p>
<p>Output: email (str)</p>
<p>Description: This function is used to verify an access token. It takes in a token string and a credentials_exception object. It decodes the token using the SECRET_KEY and ALGORITHM, retrieves the email from the decoded payload, and checks if it is None. If the email is None, it raises the credentials_exception. If there is any error decoding the token, it also raises the credentials_exception. Otherwise, it returns the email.</p>
<h2 id="generate_user_verification_code"><a class="header" href="#generate_user_verification_code">generate_user_verification_code</a></h2>
<p>Input: None</p>
<p>Output: code (str)</p>
<p>Description: This function is used to generate a user verification code. It generates a unique UUID using uuid.uuid1(), converts it to a string, splits it by "-" and retrieves the first part, and returns it as the verification code.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../server/Telegram.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../server/Telegram.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
